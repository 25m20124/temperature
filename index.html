<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>숭례문 화재 확산 시뮬레이션</title>

<style>
body {
    margin: 0;
    background: #111;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
}

canvas {
    border: 2px solid #aaa;
    background: #000;
}
</style>
</head>

<body>

<canvas id="canvas" width="800" height="500"></canvas>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

// 숭례문 이미지
const bgImage = new Image();
bgImage.src = "images/sungnyemun.png";

// 불 입자
let fires = [];

function createFire() {
    fires.push({
        x: 300 + Math.random() * 50,
        y: 200 + Math.random() * 30,
        r: 6,
        a: 1
    });
}

function drawFire(f) {
    const g = ctx.createRadialGradient(
        f.x, f.y, 0,
        f.x, f.y, f.r
    );

    g.addColorStop(0, `rgba(255,200,50,${f.a})`);
    g.addColorStop(0.5, `rgba(255,80,0,${f.a})`);
    g.addColorStop(1, `rgba(255,0,0,0)`);

    ctx.beginPath();
    ctx.fillStyle = g;
    ctx.arc(f.x, f.y, f.r, 0, Math.PI * 2);
    ctx.fill();
}

function animate() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // 배경 이미지
    ctx.drawImage(bgImage, 0, 0, canvas.width, canvas.height);

    // 불 생성
    if (Math.random() < 0.35) createFire();

    fires.forEach(f => {
        f.r += 0.7;
        f.a -= 0.006;
        f.x += Math.random() * 1.5;
        f.y += Math.random() * 1.2;
        drawFire(f);
    });

    fires = fires.filter(f => f.a > 0);

    requestAnimationFrame(animate);
}

bgImage.onload = animate;
</script>

</body>
</html>
